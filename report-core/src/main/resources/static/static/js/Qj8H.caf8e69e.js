(window.webpackJsonp=window.webpackJsonp||[]).push([["Qj8H"],{Qj8H:function(e,t,i){"use strict";i.r(t);var a=i("t3Un");function l(e){return Object(a.a)({url:"accessUser/pageList",method:"GET",params:e})}function r(e){return Object(a.a)({url:"accessUser",method:"post",data:e})}function n(e){return Object(a.a)({url:"accessUser/delete/batch",method:"post",data:e})}function s(e){return Object(a.a)({url:"accessUser",method:"put",data:e})}function o(e){return Object(a.a)({url:"accessUser/"+e.id,method:"get",params:{accessKey:e.accessKey}})}function d(e){return Object(a.a)({url:"accessUser/roleTree/"+e,method:"get"})}function u(e){return Object(a.a)({url:"accessUser/saveRoleTree",method:"post",data:e})}var c=i("14Xm"),p=i.n(c),m=i("D3Ub"),b=i.n(m),g={props:{visib:{required:!0,type:Boolean,default:!1},loginName:{required:!0,type:String,default:function(){return""}}},data:function(){return{checkedKeys:[],treeData:[]}},watch:{visib:function(e){e&&(console.log(1),this.getTreeData())}},created:function(){},methods:{getTreeData:function(){var e=this;return b()(p.a.mark(function t(){var i,a,l;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e.loginName);case 2:if(i=t.sent,a=i.code,l=i.data,"200"==a){t.next=7;break}return t.abrupt("return");case 7:e.treeData=l.treeData,e.checkedKeys=l.checkedKeys;case 9:case"end":return t.stop()}},t,e)}))()},saveTreeData:function(){var e=this;return b()(p.a.mark(function t(){var i,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={loginName:e.loginName,roleCodeList:e.$refs.roleTree.getCheckedKeys(!0)},t.next=3,u(i);case 3:if(a=t.sent,"200"==a.code){t.next=7;break}return t.abrupt("return");case 7:e.closeDialog();case 8:case"end":return t.stop()}},t,e)}))()},closeDialog:function(){this.treeData=[],this.checkedKeys=[],this.$emit("handleClose")}}},f=i("KHd+"),h=Object(f.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"tree_dialog",attrs:{title:"为用户分配角色",width:"60%","close-on-click-modal":!1,center:"",visible:e.visib,"before-close":e.closeDialog},on:{"update:visible":function(t){e.visib=t}}},[i("el-tree",{ref:"roleTree",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.checkedKeys}}),e._v(" "),i("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:e.saveTreeData}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"danger",plain:""},on:{click:e.closeDialog}},[e._v("取消")])],1)],1)},[],!1,null,null,null);h.options.__file="UserRole.vue";var y={name:"AccessUser",components:{UserRole:h.exports},data:function(){var e=this;return{dialogVisibleSetRoleForUser:!1,loginName:"",crudOption:{title:"用户管理",labelWidth:"120px",queryFormFields:[{inputType:"anji-select",anjiSelectOption:{dictCode:"ENABLE_FLAG"},label:"启用状态",field:"enableFlag"},{inputType:"input",label:"登录名",field:"loginName"},{inputType:"input",label:"真实姓名",field:"realName"},{inputType:"input",label:"手机号",field:"phone"}],buttons:{query:{api:l,permission:"userManage:query"},queryByPrimarykey:{api:o,permission:"userManage:query"},add:{api:r,permission:"userManage:insert"},delete:{api:n,permission:"userManage:delete"},edit:{api:s,permission:"userManage:update"}},columns:[{label:"",field:"id",primaryKey:!0,tableHide:!0,editHide:!0},{label:"登录名",placeholder:"",field:"loginName",tableHide:!0,editField:"loginName",inputType:"input",rules:[{required:!0,message:"登录名必填",trigger:"blur"},{min:1,max:64,message:"不超过64个字符",trigger:"blur"}],disabled:!1},{label:"真实姓名",placeholder:"",field:"realName",fieldTableRowRenderer:function(e){return e.realName+"["+e.loginName+"]"},editField:"realName",inputType:"input",rules:[{required:!0,message:"真实姓名必填",trigger:"blur"},{min:1,max:64,message:"不超过64个字符",trigger:"blur"}],disabled:!1},{label:"手机号码",placeholder:"",field:"phone",editField:"phone",inputType:"input",rules:[{min:1,max:16,message:"不超过16个字符",trigger:"blur"}],disabled:!1},{label:"用户邮箱",placeholder:"",field:"email",editField:"email",inputType:"input",rules:[{min:1,max:64,message:"不超过64个字符",trigger:"blur"}],disabled:!1},{label:"备注",placeholder:"",field:"remark",editField:"remark",inputType:"input",rules:[{min:1,max:512,message:"不超过512个字符",trigger:"blur"}],disabled:!1},{label:"启用状态",placeholder:"",field:"enableFlag",fieldTableRowRenderer:function(t){return e.getDictLabelByCode("ENABLE_FLAG",t.enableFlag)},editField:"enableFlag",inputType:"anji-select",anjiSelectOption:{dictCode:"ENABLE_FLAG"},colorStyle:{0:"table-danger",1:"table-success"},rules:[{required:!0,message:"启用状态必填",trigger:"blur"}],disabled:!1},{label:"最后一次登陆时间",placeholder:"",field:"lastLoginTime",editField:"lastLoginTime",inputType:"input",rules:[],disabled:!0},{label:"最后一次登录IP",placeholder:"",field:"lastLoginIp",editField:"lastLoginIp",inputType:"input",rules:[{min:1,max:16,message:"不超过16个字符",trigger:"blur"}],disabled:!0},{label:"创建人",placeholder:"",field:"createBy",columnType:"expand",editField:"createBy",inputType:"input",editHide:"hideOnAdd",disabled:!0},{label:"创建时间",placeholder:"",field:"createTime",columnType:"expand",editField:"createTime",inputType:"input",editHide:"hideOnAdd",disabled:!0},{label:"修改人",placeholder:"",field:"updateBy",columnType:"expand",editField:"updateBy",inputType:"input",editHide:"hideOnAdd",disabled:!0},{label:"修改时间",placeholder:"",field:"updateTime",columnType:"expand",editField:"updateTime",inputType:"input",editHide:"hideOnAdd",disabled:!0}]}}},created:function(){},methods:{handleOpenDialogSetRoleForUser:function(e){this.loginName=e.msg.loginName,this.dialogVisibleSetRoleForUser=!0}}},T=Object(f.a)(y,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("anji-crud",{ref:"listPage",attrs:{option:e.crudOption},scopedSlots:e._u([{key:"buttonLeftOnTable",fn:function(){},proxy:!0},{key:"rowButton",fn:function(t){return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"userManage:grantRole",expression:"'userManage:grantRole'"}],attrs:{type:"text"},on:{click:function(i){return e.handleOpenDialogSetRoleForUser(t)}}},[e._v("分配角色")])]}},{key:"pageSection",fn:function(){return[i("UserRole",{attrs:{"login-name":e.loginName,visib:e.dialogVisibleSetRoleForUser},on:{handleClose:function(t){e.dialogVisibleSetRoleForUser=!1}}})]},proxy:!0}])})},[],!1,null,null,null);T.options.__file="index.vue";t.default=T.exports}}]);