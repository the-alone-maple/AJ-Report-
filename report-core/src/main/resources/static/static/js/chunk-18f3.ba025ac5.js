(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-18f3"],{CJ5O:function(e,t,r){"use strict";var a=r("14Xm"),o=r.n(a),n=r("D3Ub"),i=r.n(n),s=r("sm2R"),l={name:"GetDictionary",props:{dictKey:String,updataDict:String},data:function(){return{dictionary:"",dictionaryOptions:[]}},watch:{dictKey:{immediate:!0,handler:function(){this.getSystem()}},updataDict:{immediate:!0,handler:function(){this.dictionary=this.updataDict}}},created:function(){this.getSystem()},mounted:function(){this.dictionary=this.updataDict},methods:{getSystem:function(){var e=this;return i()(o.a.mark(function t(){var r,a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.a)(e.dictKey);case 2:if(r=t.sent,a=r.code,n=r.data,"200"==a){t.next=7;break}return t.abrupt("return");case 7:e.dictionaryOptions=n;case 8:case"end":return t.stop()}},t,e)}))()},selectChange:function(e){this.$emit("input",e)}}},c=(r("DWg2"),r("KHd+")),u=Object(c.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"mini"},on:{change:e.selectChange},model:{value:e.dictionary,callback:function(t){e.dictionary=t},expression:"dictionary"}},e._l(e.dictionaryOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})}),1)},[],!1,null,"1fbe2153",null);u.options.__file="index.vue";t.a=u.exports},DWg2:function(e,t,r){"use strict";var a=r("FaPW");r.n(a).a},EjpR:function(e,t,r){},FaPW:function(e,t,r){},HDHf:function(e,t,r){"use strict";r.d(t,"d",function(){return o}),r.d(t,"a",function(){return n}),r.d(t,"g",function(){return i}),r.d(t,"f",function(){return s}),r.d(t,"i",function(){return l}),r.d(t,"l",function(){return c}),r.d(t,"k",function(){return u}),r.d(t,"j",function(){return p}),r.d(t,"b",function(){return d}),r.d(t,"h",function(){return m}),r.d(t,"e",function(){return f}),r.d(t,"c",function(){return g});var a=r("t3Un");function o(e){return Object(a.a)({url:"/dataSet/detailBysetId/"+e.id,method:"get"})}function n(e){return Object(a.a)({url:"/dataSet",method:"post",data:e})}function i(e){return Object(a.a)({url:"/dataSet",method:"put",data:e})}function s(e){return Object(a.a)({url:"/dataSet/"+e.id,method:"delete",data:e})}function l(e){return Object(a.a)({url:"/dataSource/queryAllDataSource",method:"get",data:e})}function c(e){return Object(a.a)({url:"/dataSetParam/verification",method:"post",data:e})}function u(e){return Object(a.a)({url:"/dataSet/testTransform",method:"post",data:e})}function p(e){return Object(a.a)({url:"/report/pageList",method:"get",params:e})}function d(e){return Object(a.a)({url:"/report",method:"post",data:e})}function m(e){return Object(a.a)({url:"/report",method:"put",data:e})}function f(e){return Object(a.a)({url:"/report/delReport",method:"delete",data:e})}function g(e){return Object(a.a)({url:"/dataSet/pageList?page="+e.page+"&size="+e.size+"&sort="+e.sort+"&order="+e.order+"&pageNumber="+e.pageNumber+"&pageSize="+e.pageSize,method:"GET",data:e})}},"N0W/":function(e,t,r){"use strict";var a=r("EjpR");r.n(a).a},T22U:function(e,t,r){"use strict";var a=r("14Xm"),o=r.n(a),n=r("D3Ub"),i=r.n(n),s={props:{visib:{required:!0,type:Boolean,default:!1},reportCode:{required:!0,type:String,default:function(){return""}}},data:function(){return{}},watch:{visib:function(e){}},created:function(){},methods:{saveReportShare:function(){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:({}),e.closeDialog();case 2:case"end":return t.stop()}},t,e)}))()},closeDialog:function(){this.$emit("handleClose")}}},l=r("KHd+"),c=Object(l.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"tree_dialog",attrs:{title:"报表分享",width:"60%","close-on-click-modal":!1,center:"",visible:e.visib,"before-close":e.closeDialog},on:{"update:visible":function(t){e.visib=t}}},[r("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e._v("\n    "+e._s(e.reportCode)+"\n    "),r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.saveReportShare}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"danger",plain:""},on:{click:e.closeDialog}},[e._v("取消")])],1)])},[],!1,null,null,null);c.options.__file="share.vue";t.a=c.exports},fy9d:function(e,t,r){e.exports=r.p+"static/img/charts.47700dc.jpg"},qO0n:function(e,t,r){"use strict";r.r(t);var a=r("14Xm"),o=r.n(a),n=r("D3Ub"),i=r.n(n);r("t3Un");var s,l=r("X4fA"),c=r("HDHf"),u=r("CJ5O"),p=r("T22U"),d={name:"Report",components:{Dictionary:u.a,Share:p.a},filters:{filterPushType:function(e){for(var t=0;t<s.dictionaryGroupOptions.length;t++)if(s.dictionaryGroupOptions[t].id==e)return s.dictionaryGroupOptions[t].text},reportTableType:function(e){for(var t=0;t<s.dictionaryTypeOptions.length;t++)if(s.dictionaryTypeOptions[t].id==e)return s.dictionaryTypeOptions[t].text}},data:function(){return{params:{reportCode:"",reportName:"",pageNumber:1,pageSize:10,order:"DESC",sort:"update_time"},dialogForm:{reportName:"",reportCode:"",reportDesc:"",reportImage:""},basicDialog:!1,listLoading:!0,list:null,totalCount:0,totalPage:0,dictionaryTypeOptions:[],dictionaryGroupOptions:[],rules:{},reportCodeDisable:!1,requestUrl:".//file/upload",headers:{Authorization:Object(l.d)()},visibleForShareDialog:!1,reportCodeForShareDialog:""}},mounted:function(){},beforeCreate:function(){s=this},created:function(){this.queryByPage()},methods:{search:function(){this.params.pageNumber=1,this.queryByPage()},reset:function(e){this.$refs[e].resetFields(),this.params.reportName="",this.params.reportCode="",this.params.pageNumber=1,this.queryByPage()},queryByPage:function(){var e=this;return i()(o.a.mark(function t(){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.j)(e.params);case 2:if("200"==(r=t.sent).code){t.next=5;break}return t.abrupt("return");case 5:e.listLoading=!0,e.list=r.data.records,e.list.forEach(function(e){e.reportNameCode=e.reportName+"["+e.reportCode+"]"}),e.totalCount=r.data.total,e.totalPage=r.data.pages,e.listLoading=!1;case 11:case"end":return t.stop()}},t,e)}))()},handleAvatarSuccess:function(e){this.dialogForm.reportImage=e.data.urlPath},beforeAvatarUpload:function(e){e.type,e.size;return!0},showAddReportModel:function(e){this.basicDialog=!0,void 0===e?(this.reportCodeDisable=!1,this.dialogForm={reportName:"",reportCode:"",reportDesc:"",reportImage:""}):(this.dialogForm=e,this.reportCodeDisable=!0)},share:function(e){this.reportCodeForShareDialog=e.reportCode,this.visibleForShareDialog=!0},preview:function(e){var t=this.$router.resolve({path:"/bigscreen/viewer",query:{reportCode:e.reportCode}});window.open(t.href,"_blank")},design:function(e){var t=this.$router.resolve({path:"/bigscreen/designer",query:{reportCode:e.reportCode,reportId:e.id,accessKey:e.accessKey}});window.open(t.href,"_blank")},delReport:function(e){var t=this;return i()(o.a.mark(function r(){var a;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(c.e)(e);case 2:if(a=r.sent,"200"==a.code){r.next=6;break}return r.abrupt("return");case 6:t.queryByPage();case 7:case"end":return r.stop()}},r,t)}))()},del:function(e){var t=this;this.$confirm("确定删除此条数据, 是否继续?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delReport(e)}).catch(function(){t.$message({type:"info",message:"取消删除"})})},closeDialog:function(e){e&&this.search("form"),this.$refs.userForm.resetFields(),this.basicDialog=!1},handleSizeChange:function(e){this.params.pageSize=e,this.queryByPage()},handleCurrentChange:function(e){this.params.pageNumber=e,this.queryByPage()},UserConfirm:function(){var e=this;this.$refs.form.validate(function(){var t=i()(o.a.mark(function t(r,a){var n,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=19;break}if(void 0!=e.dialogForm.id){t.next=10;break}return t.next=4,Object(c.b)(e.dialogForm);case 4:if(n=t.sent,"200"==n.code){t.next=8;break}return t.abrupt("return");case 8:t.next=16;break;case 10:return t.next=12,Object(c.h)(e.dialogForm);case 12:if(i=t.sent,"200"==i.code){t.next=16;break}return t.abrupt("return");case 16:e.closeDialog(!0),t.next=20;break;case 19:return t.abrupt("return");case 20:case"end":return t.stop()}},t,e)}));return function(e,r){return t.apply(this,arguments)}}())}}},m=(r("N0W/"),r("KHd+")),f=Object(m.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"permission",rawName:"v-permission",value:"reportManage:query",expression:"'reportManage:query'"}],ref:"form",attrs:{model:e.params,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:20,md:12,lg:6,xl:4}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticClass:"filter-item",attrs:{size:"mini",clearable:"",placeholder:"名称"},model:{value:e.params.reportName,callback:function(t){e.$set(e.params,"reportName",t)},expression:"params.reportName"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:20,md:12,lg:6,xl:4}},[a("el-form-item",{attrs:{label:"报表编码"}},[a("el-input",{staticClass:"filter-item",attrs:{size:"mini",clearable:"",placeholder:"报表编码"},model:{value:e.params.reportCode,callback:function(t){e.$set(e.params,"reportCode",t)},expression:"params.reportCode"}})],1)],1),e._v(" "),a("el-col",{staticClass:"query",attrs:{xs:24,sm:20,md:4,lg:4,xl:4}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.search("form")}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.reset("form")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"reportManage:insert",expression:"'reportManage:insert'"}],attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.showAddReportModel()}}},[e._v("新增")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"mt10",staticStyle:{width:"100%"},attrs:{border:"",data:e.list,"element-loading-text":"Loading"}},[a("el-table-column",{attrs:{align:"center",label:"序号",type:"index","min-width":"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reportName",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reportCode",label:"报表编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reportDesc",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createBy",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateBy",label:"更新人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"bigScreenManage:share",expression:"'bigScreenManage:share'"}],attrs:{type:"text"},on:{click:function(r){return e.share(t.row)}}},[e._v("分享")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"bigScreenManage:view",expression:"'bigScreenManage:view'"}],attrs:{type:"text"},on:{click:function(r){return e.preview(t.row)}}},[e._v("预览")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"bigScreenManage:design",expression:"'bigScreenManage:design'"}],attrs:{type:"text"},on:{click:function(r){return e.design(t.row)}}},[e._v("设计")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"reportManage:update",expression:"'reportManage:update'"}],attrs:{type:"text"},on:{click:function(r){return e.showAddReportModel(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"reportManage:delete",expression:"'reportManage:delete'"}],attrs:{type:"text"},on:{click:function(r){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{total:e.totalCount,"page-sizes":[10,20,50,100],"page-size":e.params.pageSize,"current-page":e.params.pageNumber,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"项目基础配置",width:"50%","close-on-click-modal":!1,center:"",visible:e.basicDialog},on:{"update:visible":function(t){e.basicDialog=t},close:e.closeDialog}},[a("el-form",{ref:"userForm",staticStyle:{"min-height":"200px"},attrs:{model:e.dialogForm,rules:e.rules,size:"small","label-width":"100px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"名称",prop:"reportName"}},[a("el-input",{model:{value:e.dialogForm.reportName,callback:function(t){e.$set(e.dialogForm,"reportName",t)},expression:"dialogForm.reportName"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:20,md:12,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"报表编码",prop:"reportCode"}},[a("el-input",{attrs:{disabled:e.reportCodeDisable},model:{value:e.dialogForm.reportCode,callback:function(t){e.$set(e.dialogForm,"reportCode",t)},expression:"dialogForm.reportCode"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.dialogForm.reportDesc,callback:function(t){e.$set(e.dialogForm,"reportDesc",t)},expression:"dialogForm.reportDesc"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"缩略图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.requestUrl,headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.dialogForm.reportImage?a("img",{staticClass:"avatar",attrs:{src:null==e.dialogForm.reportImage?r("fy9d"):e.dialogForm.reportImage}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.basicDialog=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.UserConfirm}},[e._v("保存")])],1)],1),e._v(" "),a("Share",{attrs:{visib:e.visibleForShareDialog,reportCode:e.reportCodeForShareDialog},on:{handleClose:function(t){e.visibleForShareDialog=!1}}})],1)},[],!1,null,null,null);f.options.__file="index.vue";t.default=f.exports}}]);